import{S as U,i as j,s as G,k as _,a as H,q as N,l as g,m as p,h,c as W,r as k,n as d,b as F,D as u,u as Z,E as L,o as J,X as R,y as z,z as O,A as Y,Y as ee,Z as $,g as q,d as X,B as K,_ as V}from"../chunks/index.2a7a30eb.js";import{L as te}from"../chunks/layout.7537fb17.js";const re=`#pragma vscode_glsllint_stage : vert

attribute vec4 aVertexPosition;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

void main() {
	gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;
}`,ne=`#pragma vscode_glsllint_stage : frag

void main() {
	gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);
}`;var B=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function I(){var t=new B(16);return B!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function ae(t,e,r){var s=r[0],i=r[1],n=r[2],o,c,l,f,m,x,P,E,S,M,b,y;return e===t?(t[12]=e[0]*s+e[4]*i+e[8]*n+e[12],t[13]=e[1]*s+e[5]*i+e[9]*n+e[13],t[14]=e[2]*s+e[6]*i+e[10]*n+e[14],t[15]=e[3]*s+e[7]*i+e[11]*n+e[15]):(o=e[0],c=e[1],l=e[2],f=e[3],m=e[4],x=e[5],P=e[6],E=e[7],S=e[8],M=e[9],b=e[10],y=e[11],t[0]=o,t[1]=c,t[2]=l,t[3]=f,t[4]=m,t[5]=x,t[6]=P,t[7]=E,t[8]=S,t[9]=M,t[10]=b,t[11]=y,t[12]=o*s+m*i+S*n+e[12],t[13]=c*s+x*i+M*n+e[13],t[14]=l*s+P*i+b*n+e[14],t[15]=f*s+E*i+y*n+e[15]),t}function se(t,e,r){var s=r[0],i=r[1],n=r[2];return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ie(t,e,r,s,i){var n=1/Math.tan(e/2),o;return t[0]=n/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(s-i),t[10]=(i+s)*o,t[14]=2*i*s*o):(t[10]=-1,t[14]=-2*s),t}var oe=ie;let a,v,A,Q,w,T;function ce(t,e){a=t,v=e;const r=de();r&&(A=r,w={vertexPosition:a.getAttribLocation(A,"aVertexPosition")},T={projectionMatrix:a.getUniformLocation(A,"uProjectionMatrix"),modelViewMatrix:a.getUniformLocation(A,"uModelViewMatrix")},fe(),le())}function le(){a.clearColor(0,0,0,1),a.clearDepth(1),a.enable(a.DEPTH_TEST),a.depthFunc(a.LEQUAL),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);const t=90*Math.PI/180,e=a.canvas.clientWidth/a.canvas.clientHeight,r=100,s=.1,i=I();oe(i,t,e,s,r);const n=I();ae(n,n,[0,0,-6]),se(n,n,[2,2,2]);const o=2,c=a.FLOAT,l=!1,f=0,m=0;a.bindBuffer(a.ARRAY_BUFFER,Q.position),a.vertexAttribPointer(w.vertexPosition,o,c,l,f,m),a.enableVertexAttribArray(w.vertexPosition),a.useProgram(A),a.uniformMatrix4fv(T.projectionMatrix,!1,i),a.uniformMatrix4fv(T.modelViewMatrix,!1,n);const x=4;a.drawArrays(a.TRIANGLE_STRIP,m,x)}function fe(){const t=a.createBuffer();if(!t)return v.error("Failed to create buffer"),null;a.bindBuffer(a.ARRAY_BUFFER,t);const e=[1,1,-1,1,1,-1,-1,-1];a.bufferData(a.ARRAY_BUFFER,new Float32Array(e),a.STATIC_DRAW),Q={position:t}}function de(){const t=C(a.VERTEX_SHADER,re),e=C(a.FRAGMENT_SHADER,ne);if(!t||!e)return null;const r=a.createProgram();return r?(a.attachShader(r,t),a.attachShader(r,e),a.linkProgram(r),a.getProgramParameter(r,a.LINK_STATUS)?r:(v.error("Failed to link shader program: "+a.getProgramInfoLog(r)),a.deleteProgram(r),null)):(v.error("Failed to create shader program"),null)}function C(t,e){const r=a.createShader(t);return r?(a.shaderSource(r,e),a.compileShader(r),a.getShaderParameter(r,a.COMPILE_STATUS)?r:(v.error("Failed to compile shader: "+a.getShaderInfoLog(r)),a.deleteShader(r),null)):(v.error("Failed to create shader"),null)}function me(t){let e,r,s,i,n;return{c(){e=_("div"),r=_("canvas"),s=H(),i=_("div"),n=N(t[0]),this.h()},l(o){e=g(o,"DIV",{id:!0,class:!0});var c=p(e);r=g(c,"CANVAS",{id:!0,width:!0,height:!0,class:!0}),p(r).forEach(h),s=W(c),i=g(c,"DIV",{});var l=p(i);n=k(l,t[0]),l.forEach(h),c.forEach(h),this.h()},h(){d(r,"id","canvas"),d(r,"width","800"),d(r,"height","600"),d(r,"class","svelte-1gsjkl0"),d(e,"id","container"),d(e,"class","svelte-1gsjkl0")},m(o,c){F(o,e,c),u(e,r),u(e,s),u(e,i),u(i,n)},p(o,[c]){c&1&&Z(n,o[0])},i:L,o:L,d(o){o&&h(e)}}}function he(t,e,r){let s="";function i(){let n=document.getElementById("canvas");if(!(n instanceof HTMLCanvasElement)){r(0,s="Canvas not found");return}let o=n.getContext("webgl");if(!o){r(0,s="WebGL not supported");return}ce(o,{error:c=>{r(0,s=c)}})}return J(i),[s]}class ue extends U{constructor(e){super(),j(this,e,he,me,G,{})}}function _e(t){let e,r,s,i,n,o,c;return o=new ue({}),{c(){e=_("h1"),r=_("a"),s=_("span"),i=N("WebGL 样例"),n=H(),z(o.$$.fragment),this.h()},l(l){e=g(l,"H1",{id:!0});var f=p(e);r=g(f,"A",{"aria-hidden":!0,tabindex:!0,href:!0});var m=p(r);s=g(m,"SPAN",{class:!0}),p(s).forEach(h),m.forEach(h),i=k(f,"WebGL 样例"),f.forEach(h),n=W(l),O(o.$$.fragment,l),this.h()},h(){d(s,"class","icon icon-link"),d(r,"aria-hidden","true"),d(r,"tabindex","-1"),d(r,"href","#webgl-样例"),d(e,"id","webgl-样例")},m(l,f){F(l,e,f),u(e,r),u(r,s),u(e,i),F(l,n,f),Y(o,l,f),c=!0},p:L,i(l){c||(q(o.$$.fragment,l),c=!0)},o(l){X(o.$$.fragment,l),c=!1},d(l){l&&h(e),l&&h(n),K(o,l)}}}function ge(t){let e,r;const s=[t[0],D];let i={$$slots:{default:[_e]},$$scope:{ctx:t}};for(let n=0;n<s.length;n+=1)i=R(i,s[n]);return e=new te({props:i}),{c(){z(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,o){Y(e,n,o),r=!0},p(n,[o]){const c=o&1?ee(s,[o&1&&$(n[0]),o&0&&$(D)]):{};o&2&&(c.$$scope={dirty:o,ctx:n}),e.$set(c)},i(n){r||(q(e.$$.fragment,n),r=!0)},o(n){X(e.$$.fragment,n),r=!1},d(n){K(e,n)}}}const D={category:"Experiment"};function pe(t,e,r){return t.$$set=s=>{r(0,e=R(R({},e),V(s)))},e=V(e),[e]}class Ae extends U{constructor(e){super(),j(this,e,pe,ge,G,{})}}export{Ae as component};
